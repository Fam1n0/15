<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Quantum Visualization</title><style>body{margin:0;overflow:hidden;display:flex;justify-content:center;align-items:center;height:100vh;background-color:black}canvas,video{position:absolute;width:100vw;height:100vh;object-fit:cover}.controls{position:absolute;top:10px;left:10px;z-index:10;display:flex;flex-direction:column;gap:10px;color:white}.hidden{display:none}button{font-size:16px;padding:10px;cursor:pointer}</style></head><body><video id="video1" autoplay playsinline class="hidden"></video><video id="video2" autoplay playsinline class="hidden"></video><video id="video3" autoplay playsinline class="hidden"></video><canvas id="chakraCanvas"></canvas><div id="controls" class="controls hidden"><button id="fullscreenButton">Toggle Fullscreen</button><button id="saveButton">Save Image</button><label>Wave Speed: <input type="range" id="waveSpeed" min="0.1" max="5" step="0.1" value="1"></label></div><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script><script src="https://d3js.org/d3.v6.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script><script>document.addEventListener("DOMContentLoaded",function(){const video1=document.getElementById('video1');const video2=document.getElementById('video2');const video3=document.getElementById('video3');const chakraCanvas=document.getElementById('chakraCanvas');const fullscreenButton=document.getElementById('fullscreenButton');const saveButton=document.getElementById('saveButton');const controls=document.getElementById('controls');const waveSpeedControl=document.getElementById('waveSpeed');let renderer,camera,scene;let feedbackData=JSON.parse(localStorage.getItem('feedbackData'))||[];let weights=JSON.parse(localStorage.getItem('weights'))||[1,1,1];let startTime=localStorage.getItem('startTime')||new Date().getTime();let generations=JSON.parse(localStorage.getItem('generations'))||[];let learnedPreferences=JSON.parse(localStorage.getItem('learnedPreferences'))||{};navigator.mediaDevices.getUserMedia({video:true}).then(stream=>{video1.srcObject=stream;video2.srcObject=stream;video3.srcObject=stream});function init(){renderer=new THREE.WebGLRenderer({canvas:chakraCanvas,alpha:true});renderer.setSize(window.innerWidth,window.innerHeight);scene=new THREE.Scene();camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);camera.position.z=5;scene.add(new THREE.AmbientLight(0x404040));const light=new THREE.PointLight(0xffffff,1);light.position.set(50,50,50);scene.add(light);animate();}function processVideo(video,filterColor){const videoWidth=video.videoWidth;const videoHeight=video.videoHeight;if(videoWidth&&videoHeight){const canvas=document.createElement('canvas');canvas.width=videoWidth;canvas.height=videoHeight;const ctx=canvas.getContext('2d');ctx.drawImage(video,0,0,videoWidth,videoHeight);const imageData=ctx.getImageData(0,0,videoWidth,videoHeight);const data=imageData.data;for(let i=0;i<data.length;i+=4){const avg=(data[i]+data[i+1]+data[i+2])/3;data[i]=avg*filterColor.r;data[i+1]=avg*filterColor.g;data[i+2]=avg*filterColor.b;}ctx.putImageData(imageData,0,0);return new THREE.CanvasTexture(canvas);}}function createWavePattern(texture,position){const geometry=new THREE.PlaneGeometry(5,5);const material=new THREE.MeshBasicMaterial({map:texture,transparent:true,opacity:0.5});const plane=new THREE.Mesh(geometry,material);plane.position.set(position.x,position.y,position.z);plane.rotation.z=Math.random()*Math.PI;scene.add(plane);}function animate(){requestAnimationFrame(animate);const filterColors=[{r:1,g:0.5,b:0.5},{r:0.5,g:1,b:0.5},{r:0.5,g:0.5,b:1}];const videos=[video1,video2,video3];videos.forEach((video,index)=>{const texture=processVideo(video,filterColors[index]);if(texture){const position={x:(Math.random()-0.5)*10,y:(Math.random()-0.5)*10,z:(Math.random()-0.5)*10};createWavePattern(texture,position);}});renderer.render(scene,camera);}fullscreenButton.addEventListener('click',function(){if(!document.fullscreenElement){document.documentElement.requestFullscreen();}else if(document.exitFullscreen){document.exitFullscreen();}});saveButton.addEventListener('click',function(){const link=document.createElement('a');const timestamp=new Date().toISOString().replace(/[:.]/g,'-');const canvas=document.createElement('canvas');canvas.width=chakraCanvas.width;canvas.height=chakraCanvas.height;const tempCtx=canvas.getContext('2d');tempCtx.fillStyle='black';tempCtx.fillRect(0,0,canvas.width,canvas.height);tempCtx.drawImage(chakraCanvas,0,0);link.download=`chakra_visualization_${timestamp}.png`;link.href=canvas.toDataURL('image/png',1.0);link.click();});chakraCanvas.addEventListener('click',function(){controls.classList.toggle('hidden');});function savePreferences(){const preferences={feedbackData,weights,startTime,generations};localStorage.setItem('learnedPreferences',JSON.stringify(preferences));}function loadPreferences(){if(localStorage.getItem('learnedPreferences')){const savedPreferences=JSON.parse(localStorage.getItem('learnedPreferences'));feedbackData=savedPreferences.feedbackData;weights=savedPreferences.weights;startTime=savedPreferences.startTime;generations=savedPreferences.generations;}}window.addEventListener('resize',()=>{renderer.setSize(window.innerWidth,window.innerHeight);camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();});window.addEventListener('beforeunload',savePreferences);init();loadPreferences();});</script></body></html>
